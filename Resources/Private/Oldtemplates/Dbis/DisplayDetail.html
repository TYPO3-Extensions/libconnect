<div id="dbis-detail">
<f:if condition="{error}">
	<f:then>
		<h1 class="libconnect-h1"><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.error.h1" /></h1>
		<p>
			<f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.error.p1" />
		</p>
		<p>
			<f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.error.p2" />
		</p>
	</f:then>
	<f:else>
		{namespace libconnect=Tx_Libconnect_ViewHelpers}
		<h1 class="libconnect-h1"><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.database" /></h1>
		<h2 class="libconnect-h2"><f:escape value="{db.title}" type="raw" /></h2>

		<f:if condition="{db.access_workaround}">
			<f:if condition="{db.access.href}">
			<p>
				<a class="dbis-research" href="http://rzblx10.uni-regensburg.de/dbinfo/{db.access.href}" target="_blank"><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.recherche" /></a>
			</p>
			</f:if>
		</f:if>

		<table class="dbis-result-details">
		<tbody>

		<f:if condition="<f:count subject='{db.else_titles}' /> > 0">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.othertitle" /></strong>
			</th>

			<td>
				<ul>
					<f:for each="{db.else_titles}" as="title">
						<li><f:escape value="{title}" type="raw" /></li>
					</f:for>
				</ul>
			</td>
		</tr>
		</f:if>

		<f:if condition="<f:count subject='{db.access_lic}' /> > 0">
			<f:for each="{db.access_lic}" as="a_lics" key="accesstype">
				<f:if condition="{libconnect:compare(a: accesstype, b: 'free')}">
				<f:then>
					<tr>
						<th>
							<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.access.lic" /></strong>
						</th>
						<td>
							<ul>
							<f:for each="{a_lics}" as="a_lic">
								<li><a href="http://rzblx10.uni-regensburg.de/dbinfo/{a_lic.href}" target="_blank">{a_lic.name}</a>{a_lic.type}</li>
							</f:for>
							</ul>
						</td>
					</tr>
				</f:then>
				<f:else>
					<tr>
						<th>
							<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.access.alic" /></strong>
						</th>
						<td>
							<ul>
							<f:for each="{a_lics}" as="a_lic">
								<li><a href="http://rzblx10.uni-regensburg.de/dbinfo/{a_lic.href}" target="_blank">{a_lic.name}</a>{a_lic.type}</li>
							</f:for>
							</ul>
						</td>
					</tr>
				 </f:else>
				</f:if>
			</f:for>
		</f:if>

		<f:if condition="{db.db_access_short_text}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.access.text" /></strong>
			</th>

			<td>
				<span class="dbis-list-accessinfo-{db.access_id}"><f:escape value="{db.db_access_short_text}" type="raw" /></span>
			</td>
		</tr>
		</f:if>

		<f:if condition="{db.hints}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.access.hints" /></strong>
			</th>

			<td>
				<f:escape value="{db.hints}" type="raw" />
			</td>
		</tr>
		</f:if>

		<f:if condition="{db.content}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.content" /></strong>
			</th>

			<td>
				<f:escape value="{db.content}" type="raw" />
			</td>
		</tr>
		</f:if>

                    <f:if condition="{db.instruction}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.instruction" /></strong>
			</th>

			<td>
				<f:format.htmlentitiesDecode>{db.instruction}</f:format.htmlentitiesDecode>
			</td>
		</tr>
		</f:if>
                
		<f:if condition="{db.subjects}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.subjects" /></strong>
			</th>

			<td>
				<ul>
					<f:for each="{db.subjects}" as="subject">
						<li><f:escape value="{subject}" type="raw" /></li>
					</f:for>
				</ul>
			</td>
		</tr>
		</f:if>

		<f:if condition="{db.keywords_join}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.keywords" /></strong>
			</th>

			<td>
				<f:escape value="{db.keywords_join}" type="raw" />
			</td>
		</tr>
		</f:if>

		<f:if condition="{db.appearence}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.appearence" /></strong>
			</th>

			<td>
				<f:escape value="{db.appearence}" type="raw" />
			</td>
		</tr>
		</f:if>

		<f:if condition="{db.db_type_infos_join}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.dbtype" /></strong>
			</th>

			<td>
				<f:escape value="{db.db_type_infos_join}" type="raw" />
			</td>
			<td>
				<f:for each="{db.db_type_infos}" as="info" key="key">
					<div class="dbtype">
						<f:escape value="{info.type}" type="raw" />
						<ul>
							<f:escape value="{info.long_text}" type="raw" />
						</ul>
					</div>
				</f:for>
			</td>
		</tr>
		</f:if>

		<f:if condition="{db.publisher}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.publisher" /></strong>
			</th>

			<td>
				<f:escape value="{db.publisher}" type="raw" />
			</td>
		</tr>
		</f:if>

		<f:if condition="{db.report_periods}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.report_periods" /></strong>
			</th>

			<td>
				<f:escape value="{db.report_periods}" type="raw" />
			</td>
		</tr>
		</f:if>

		<f:if condition="{db.update}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.update" /></strong>
			</th>

			<td>
				<f:escape value="{db.update}" type="raw" />
			</td>
		</tr>
		</f:if>

		<f:if condition="{db.license}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.license" /></strong>
			</th>

			<td>
				<f:escape value="{db.license}" type="raw" />
			</td>
		</tr>
		</f:if>

		<f:if condition="{db.remarks}">
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.dbis.detail.remarks" /></strong>
			</th>

			<td>
				<f:escape value="{db.remarks}" type="raw" />
			</td>
		</tr>
		</f:if>

		</tbody>
		</table>

	</f:else>
</f:if>
</div>