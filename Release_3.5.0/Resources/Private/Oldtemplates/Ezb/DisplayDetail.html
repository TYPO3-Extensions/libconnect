<div id="ezb-detail">
<f:if condition="{error}">
	<f:then>
		<h1><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.error.h1" /></h1>
		<p>
			<f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.error.p1" />
		</p>
		<p>
			<f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.error.p2" />
		</p>
	</f:then>
	<f:else>
		{namespace libconnect=Tx_Libconnect_ViewHelpers}
		<h1><f:escape value="{journal.title}" type="raw" /></h1>

		<table id="ezb-result-details">
		<tbody>
		<tr>
			<th>
				<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.result.th" />:</strong>
			</th>

			<td>
				<span class="ezb-list-accessinfo-access_{journal.color_code.color}">
					{journal.color_code.text}
				</span>
			</td>
		</tr>

		<f:if condition="<f:count subject='{journal.periods}' /> > 0">
			<f:for each="{journal.periods}" as="period">
			<tr>
				<f:if condition="{libconnect:strlen(string: period.label)} > 0">
				<f:then>
					<th>
						<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.license.th" />:</strong>
					</th>
					<td>
						<f:if condition="{libconnect:trimedstrlen(string: period.label)} > 0">
						<f:then>
							<a class="ezb-license" href="{libconnect:urldecode(url: period.link)}" target="_blank">{period.label}</a>&nbsp;
						</f:then>
						<f:else>
						    <a class="ezb-license" href="{libconnect:urldecode(url: period.link)}" target="_blank"><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.period.a" /></a>
						</f:else>
						</f:if>
                        <f:if condition="{period.readme}">
                            <f:then>
                                <a href="<f:escape value="{period.readme}" type="raw" />"><span class="ezb-list-accessinfo-access_{period.color_code}"><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.period.readme" /></span></a>
                            </f:then>
                            
                            <f:else>
                                <span class="ezb-list-accessinfo-access_{period.color_code}">&nbsp;</span></a>
                            </f:else>
                        </f:if>							
                    </td>
				</f:then>
				<f:else>
				<th>
					<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.period.rest" />:</strong>
				</th>
				<td>
					<span class="ezb-list-accessinfo-access_{period.color_code}"><a class="ezb-license" href="{libconnect:urldecode(url: period.link)}" target="_blank"><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.period.homepage" /></a></span>
				</td>
				</f:else>
				</f:if>
			</tr>
			</f:for>
		</f:if>

		
		<f:if condition="{libconnect:strlen(string: journal.fulltext)} > 0">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.fulltext.th" />:</strong>
			</th>

			<td>
				<a class="dbis-research" href="{libconnect:urldecode(url: journal.fulltext_link)}" target="_blank">{libconnect:truncate(string: journal.fulltext, length: 70)}</a>
			</td>
		</tr>
		</f:if>

		<f:if condition="<f:count subject='{journal.homepages}' /> > 0">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.homepages.th" />:</strong>
			</th>

			<td>
				<ul>
				<f:for each="{journal.homepages}" as="homepage">
					<li>
						<a class="dbis-research" href="http://ezb.uni-regensburg.de/warpto.phtml?bibid={bibid}&colors=7&lang=de&jour_id={journal.id}&url={libconnect:urldecode(url: homepage)}" target="_blank">{libconnect:truncate(string: homepage, length: 70)}</a>
					</li>
				</f:for>
				</ul>
			</td>
		</tr>
		</f:if>

		<f:if condition="{journal.first_fulltext.date} > 0">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.since.th" />:</strong>
			</th>

			<td>
			<f:if condition="{journal.first_fulltext.volume}"><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.volume.td" /> <f:escape value="{journal.first_fulltext.volume}" type="raw" /></f:if>
			<f:if condition="{journal.first_fulltext.issue}"><f:if condition="{journal.first_fulltext.volume}">, </f:if><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.issue.td" /> <f:escape value="{journal.first_fulltext.issue}" type="raw" /></f:if>
			({journal.first_fulltext.date})
			</td>
		</tr>
		</f:if>

		<f:if condition="{journal.last_fulltext}">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.untilthen.th" />:</strong>
			</th>

			<td>
			<f:if condition="{journal.last_fulltext.volume}"><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.volume.td" /> {journal.last_fulltext.volume}</f:if>
			<f:if condition="{journal.last_fulltext.issue}"><f:if condition="{journal.first_fulltext.volume}">, </f:if><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.issue.td" /> {journal.last_fulltext.issue}</f:if>
			({journal.last_fulltext.date})
			</td>
		</tr>
		</f:if>

		<f:if condition="{journal.publisher}">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.publisher.th" />:</strong>
			</th>

			<td>
			<f:escape value="{journal.publisher}" type="raw" />
			</td>
		</tr>
		</f:if>

		<f:if condition="{journal.ZDB_number}">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.zdb.th" />:</strong>
			</th>

			<td>
			<f:if condition="{journal.ZDB_number_link}"><a href="{journal.ZDB_number_link}" target="_blank"></f:if>
			{journal.ZDB_number}
			<f:if condition="{journal.ZDB_number_link}"></a></f:if>
			</td>
		</tr>
		</f:if>
		
		<f:if condition="{libconnect:strlen(string: journal.subjects_join)} > 0">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.subjects_join" />:</strong>
			</th>

			<td>
			<f:escape value="{journal.subjects_join}" type="raw" />
			</td>
		</tr>
		</f:if>

		<f:if condition="{journal.keywords_join}">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.keywords_join" />:</strong>
			</th>

			<td>
			<f:escape value="{journal.keywords_join}" type="raw" />
			</td>
		<tr>
		</f:if>
	
		<f:if condition="{libconnect:strlen(string: journal.eissns_join)} > 0">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.eissns_join" />:</strong>
			</th>

			<td>
			<f:escape value="{journal.eissns_join}" type="raw" />
			</td>
		</tr>
		</f:if>
		
		<f:if condition="{libconnect:strlen(string: journal.pissns_join)} > 0">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.pissns_join" />:</strong>
			</th>

			<td>
			<f:escape value="{journal.pissns_join}" type="raw" />
			</td>
		</tr>
		</f:if>
		
		<f:if condition="{libconnect:strlen(string: journal.appearence)} > 0">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.appearence" />:</strong>
			</th>

			<td>
			<f:escape value="{journal.appearence}" type="raw" />
			</td>
		</tr>
		</f:if>

		<f:if condition="{libconnect:strlen(string: journal.costs)} > 0">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.costs" />:</strong>
			</th>

			<td>
			<f:escape value="{journal.costs}" type="raw" />
			</td>
		</tr>
		</f:if>

		<f:if condition="{libconnect:strlen(string: journal.remarks)} > 0">
		<tr>
			<th>
			<strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.remarks" />:</strong>
			</th>

			<td>
			<f:escape value="{journal.remarks}" type="raw" />
			</td>
		</tr>
		</f:if>

<!-- code for location data -->
       <f:if condition="{settings.enableLocationData}">
        <f:if condition="<f:count subject='{journal.locationData}' /> > 0">
        <tr>
            <th>
                <strong><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.print.yes" />:</strong><br />
                (<f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.print.source" />: <a href="http://www.zdb-opac.de" target="zdbfenster">ZDB</a>)
            </th>
            
            <td>
                <table width="100%" class="zdb-location-info">
                    <tbody>
                    <f:for each="{journal.locationData.resultList}" as="result">                   
                        <tr>
                            <td class="zdb-location-info-result">
                                <table class="zdb-location-detail">
                                    <tbody>
                                        <!--<f:if condition="{libconnect:strlen(string: result.Title)} > 0">
                                        <tr>
                                            <th>Titel:</th>
                                            <td><f:escape value="{result.Title}" type="raw" /></td>
                                        </tr>
                                        </f:if>-->
                                        <f:if condition="{libconnect:strlen(string: result.Period)} > 0">
                                        <tr>
                                            <th><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.print.period" />:</th>
                                            <td><f:escape value="{result.Period}" type="raw" /></td>
                                        </tr>
                                        </f:if>
                                        <f:if condition="{libconnect:strlen(string: result.Signature)} > 0">
                                        <tr>
                                            <th><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.print.signature" />:</th>
                                            <td><f:escape value="{result.Signature}" type="raw" /></td>
                                        </tr>
                                        </f:if>
                                        <f:if condition="{libconnect:strlen(string: result.Location)} > 0">
                                        <tr>
                                            <th><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.print.location" />:</th>
                                            <td><f:escape value="{result.Location}" type="raw" /></td>
                                        </tr>
                                        </f:if>
                                    </tbody>
                                </table>                            
                            </td>
                            <td class="zdb-location-info-reference">
                            <f:for each="{journal.locationData.references}" as="reference">
                                <p>
                                    <f:if condition="{settings.useIconService}">
                                        <f:then>
                                            <a href="<f:escape value="{journal.locationData.iconInfoUrl}" type="raw" />" target="jopinfo">
                                            <img src="<f:escape value="{journal.locationData.iconRequest}" type="raw" />" alt="Informationen zur Verfügbarkeit" title="Informationen zur Verfügbarkeit"/>
                                            </a>
                                        </f:then>
                                        <f:else>
                                            <a href="<f:escape value="{reference.URL}" type="raw" />" target="zdbopac">                                    
                                            <img src="{f:uri.resource(path:'Img/zdb-state_{result.state}.gif')}" class="zdb-state-{result.state}-icon" alt="<f:escape value="{reference.Label}" type="raw" />" title="<f:escape value="{reference.Label}" type="raw" />"/>
                                            </a>
                                        </f:else>
                                    </f:if>
                                </p>
                            </f:for>
                            </td>
                        </tr>
                        </f:for>
                    </tbody>
                </table>
            </td>
        </tr>
        </f:if>
       </f:if>
<!-- ende code for location data -->   
		
		<f:if condition="{libconnect:strlen(string: journal.participants)} > 0">
		<tr>
            <th>
			<strong>&nbsp;</strong>
            </th>

			<td>
			<a href="<f:escape value="{journal.participants}" type="raw" />" target="zdbopac"><f:translate key="LLL:EXT:libconnect/Resources/Private/Language/locallang.xml:tx_libconnect.ezb.detail.print.participants" /></a>
			</td>
		</tr>
		</f:if>
		
		</tbody>
		</table>
	</f:else>
</f:if>
</div>